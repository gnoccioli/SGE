{% extends "base.html" %}
{% block title %}Relatórios - Sistema de Gestão Escolar{% endblock %}
{% block content %}
<div class="container">
    <h2>Relatórios</h2>

    <h3>Relatório de Matrículas</h3>
    <form method="POST" action="{{ url_for('relatorio_matriculas') }}">
        <div class="form-group">
            <label for="curso_id">Curso:</label>
            <select name="curso_id" id="curso_id">
                <option value="">Todos os cursos</option>
                {% for curso in cursos %}
                    <option value="{{ curso.id }}">{{ curso.nome }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit">Gerar Relatório</button>
    </form>

    <hr>

    <h3>Relatório de Frequências</h3>
    <form method="POST" action="{{ url_for('relatorio_frequencias') }}">
        <div class="form-group">
            <label for="aluno_id">Aluno:</label>
            <select name="aluno_id" id="aluno_id">
                <option value="">Todos os alunos</option>
                {% for aluno in alunos %}
                    <option value="{{ aluno.id }}">{{ aluno.nome }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit">Gerar Relatório</button>
    </form>

    {% if relatorio %}
        <hr>
        <h3>Resultado</h3>
        <table>
            <thead>
                <tr>
                    {% for col in colunas %}
                        <th>{{ col }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for linha in relatorio %}
                <tr>
                    {% for valor in linha %}
                        <td>{{ valor }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</div>
{% endblock %}
